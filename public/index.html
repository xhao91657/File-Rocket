<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File-Rocket - æé€Ÿæ–‡ä»¶ä¼ è¾“</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <span>ğŸš€</span>
                <span>File-Rocket</span>
            </div>
            <p class="subtitle">æ–°ä¸€ä»£å®‰å…¨æµå¼æ–‡ä»¶ä¼ è¾“</p>
        </header>

        <main class="main-content">
            <div class="action-cards">
                <div class="card" onclick="goToUpload()">
                    <div class="card-icon">ğŸ“¤</div>
                    <h3>å‘é€æ–‡ä»¶</h3>
                    <p>æé€Ÿæµå¼ä¸Šä¼ ï¼Œç”Ÿæˆä¸“å±å–ä»¶ç </p>
                    <button class="btn-primary">å¼€å§‹å‘é€</button>
                </div>

                <div class="card" onclick="goToReceive()">
                    <div class="card-icon">ğŸ“¥</div>
                    <h3>æ¥æ”¶æ–‡ä»¶</h3>
                    <p>è¾“å…¥å–ä»¶ç ï¼Œå³åˆ»å¼€å§‹ä¸‹è½½</p>
                    <button class="btn-primary">å¼€å§‹æ¥æ”¶</button>
                </div>
            </div>

            <div class="features">
                <div class="feature">
                    <span>ğŸ”’</span>
                    <span>ç«¯åˆ°ç«¯åŠ å¯†</span>
                </div>
                <div class="feature">
                    <span>âš¡</span>
                    <span>å†…å­˜æµå¼ä¼ è¾“</span>
                </div>
                <div class="feature">
                    <span>ğŸŒ</span>
                    <span>å…¨å¹³å°æ”¯æŒ</span>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p id="copyrightText" style="cursor: pointer;">&copy; 2025 File-Rocket 4.0 â€¢ Designed for Speed</p>
        </footer>
    </div>

    <!-- ç®¡ç†å‘˜ç™»å½•å¼¹çª— -->
    <div id="adminLoginModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; justify-content: center; align-items: center;">
        <div style="background: white; padding: 40px; border-radius: 20px; max-width: 400px; width: 90%; text-align: center;">
            <h2 style="margin-bottom: 20px; color: var(--text-main);">ğŸ” ç®¡ç†å‘˜ç™»å½•</h2>
            <input type="password" id="adminPasswordInput" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç " 
                   style="width: 100%; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1rem; margin-bottom: 20px;">
            <div style="display: flex; gap: 15px;">
                <button onclick="closeAdminModal()" 
                        style="flex: 1; padding: 15px; background: #e5e7eb; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">
                    å–æ¶ˆ
                </button>
                <button onclick="adminLogin()" 
                        style="flex: 1; padding: 15px; background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">
                    ç™»å½•
                </button>
            </div>
        </div>
    </div>

    <script>
        function goToUpload() {
            window.location.href = '/upload.html';
        }

        function goToReceive() {
            window.location.href = '/receive.html';
        }

        // ç®¡ç†å‘˜å…¥å£
        let clickCount = 0;
        let clickTimer = null;
        
        document.getElementById('copyrightText').addEventListener('click', function() {
            clickCount++;
            
            if (clickTimer) {
                clearTimeout(clickTimer);
            }
            
            if (clickCount >= 4) {
                showAdminModal();
                clickCount = 0;
            } else {
                clickTimer = setTimeout(() => {
                    clickCount = 0;
                }, 2000);
            }
        });
        
        function showAdminModal() {
            document.getElementById('adminLoginModal').style.display = 'flex';
            document.getElementById('adminPasswordInput').focus();
        }
        
        function closeAdminModal() {
            document.getElementById('adminLoginModal').style.display = 'none';
            document.getElementById('adminPasswordInput').value = '';
        }
        
        async function adminLogin() {
            const password = document.getElementById('adminPasswordInput').value;
            
            if (!password) {
                alert('è¯·è¾“å…¥å¯†ç ');
                return;
            }
            
            try {
                const response = await fetch('/api/admin/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ password })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    sessionStorage.setItem('adminToken', data.token);
                    window.location.href = '/admin.html';
                } else {
                    alert(data.message || 'ç™»å½•å¤±è´¥');
                }
            } catch (error) {
                alert('ç™»å½•å¤±è´¥ï¼š' + error.message);
            }
        }
        
        // å›è½¦ç™»å½•
        document.getElementById('adminPasswordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                adminLogin();
            }
        });
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.getElementById('adminLoginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAdminModal();
            }
        });
    </script>
</body>
</html>